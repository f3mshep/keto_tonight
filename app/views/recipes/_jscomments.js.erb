class Comment {
    constructor(argument){
        debugger
        this.serialized = $(argument).serialize()
        this.postURL = argument.action.replace(/https?:\/\/localhost:3000/, "")
        this.id = argument.id
        this.selector = argument
    }

    postComment(){
        let postThis = $.post(this.postURL, this.serialized, (data)=>{
            debugger
            var commentHolder = document.createElement("div")
            commentHolder.id = data.id
            commentHolder.innerHTML = "<%= j (render(@comment)) %>"
            commentHolder.getElementsByTagName("p")[0].innerHTML = data.content
            commentHolder.getElementsByTagName("button")[0].id = data.id
            commentHolder.getElementsByTagName("button")[1].id = data.id
            document.getElementById("ajaxComments").appendChild(commentHolder)
            $('#leaveComment').modal('hide')
        })
    }



    deleteComment(){
    // var deleteMe = this.selector
    // $.ajax({
    // url: '',
    // type: 'DELETE',
    // success: function(result) {
    //     $(deleteMe).remove()
    // }
    //     });
    }
}









$(function (){
    $("#new_comment").submit(function (event) {
        debugger
        event.preventDefault()
        let commentObj = new Comment(this)
        commentObj.postComment()
    })
    $(".js-delete").click(function(){
        debugger
        let commentObj = new Comment(this.parentElement)
        commentObj.deleteComment()
    })
})